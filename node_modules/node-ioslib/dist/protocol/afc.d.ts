/// <reference types="node" />
import * as net from 'net';
import { ProtocolClient, ProtocolWriter, ProtocolReader, ProtocolReaderCallback } from './protocol';
export declare const AFC_MAGIC = "CFA6LPAA";
export declare const AFC_HEADER_SIZE = 40;
export interface AFCHeader {
    magic: typeof AFC_MAGIC;
    totalLength: number;
    headerLength: number;
    requestId: number;
    operation: AFC_OPS;
}
export interface AFCMessage {
    operation: AFC_OPS;
    data?: any;
    payload?: any;
}
export interface AFCResponse {
    operation: AFC_OPS;
    id: number;
    data: Buffer;
}
export interface AFCStatusResponse {
    operation: AFC_OPS.STATUS;
    id: number;
    data: number;
}
export declare enum AFC_OPS {
    INVALID = 0,
    STATUS = 1,
    DATA = 2,
    READ_DIR = 3,
    READ_FILE = 4,
    WRITE_FILE = 5,
    WRITE_PART = 6,
    TRUNCATE = 7,
    REMOVE_PATH = 8,
    MAKE_DIR = 9,
    GET_FILE_INFO = 10,
    GET_DEVINFO = 11,
    WRITE_FILE_ATOM = 12,
    FILE_OPEN = 13,
    FILE_OPEN_RES = 14,
    FILE_READ = 15,
    FILE_WRITE = 16,
    FILE_SEEK = 17,
    FILE_TELL = 18,
    FILE_TELL_RES = 19,
    FILE_CLOSE = 20,
    FILE_SET_SIZE = 21,
    GET_CON_INFO = 22,
    SET_CON_OPTIONS = 23,
    RENAME_PATH = 24,
    SET_FS_BS = 25,
    SET_SOCKET_BS = 26,
    FILE_LOCK = 27,
    MAKE_LINK = 28,
    GET_FILE_HASH = 29,
    SET_FILE_MOD_TIME = 30,
    GET_FILE_HASH_RANGE = 31,
    FILE_SET_IMMUTABLE_HINT = 32,
    GET_SIZE_OF_PATH_CONTENTS = 33,
    REMOVE_PATH_AND_CONTENTS = 34,
    DIR_OPEN = 35,
    DIR_OPEN_RESULT = 36,
    DIR_READ = 37,
    DIR_CLOSE = 38,
    FILE_READ_OFFSET = 39,
    FILE_WRITE_OFFSET = 40
}
/** Error Codes */
export declare enum AFC_STATUS {
    SUCCESS = 0,
    UNKNOWN_ERROR = 1,
    OP_HEADER_INVALID = 2,
    NO_RESOURCES = 3,
    READ_ERROR = 4,
    WRITE_ERROR = 5,
    UNKNOWN_PACKET_TYPE = 6,
    INVALID_ARG = 7,
    OBJECT_NOT_FOUND = 8,
    OBJECT_IS_DIR = 9,
    PERM_DENIED = 10,
    SERVICE_NOT_CONNECTED = 11,
    OP_TIMEOUT = 12,
    TOO_MUCH_DATA = 13,
    END_OF_DATA = 14,
    OP_NOT_SUPPORTED = 15,
    OBJECT_EXISTS = 16,
    OBJECT_BUSY = 17,
    NO_SPACE_LEFT = 18,
    OP_WOULD_BLOCK = 19,
    IO_ERROR = 20,
    OP_INTERRUPTED = 21,
    OP_IN_PROGRESS = 22,
    INTERNAL_ERROR = 23,
    MUX_ERROR = 30,
    NO_MEM = 31,
    NOT_ENOUGH_DATA = 32,
    DIR_NOT_EMPTY = 33,
    FORCE_SIGNED_TYPE = -1
}
export declare enum AFC_FILE_OPEN_FLAGS {
    RDONLY = 1,
    RW = 2,
    WRONLY = 3,
    WR = 4,
    APPEND = 5,
    RDAPPEND = 6
}
export declare class AFCError extends Error {
    status: AFC_STATUS;
    constructor(msg: string, status: AFC_STATUS);
}
export declare class AFCProtocolClient extends ProtocolClient {
    private requestId;
    private requestCallbacks;
    constructor(socket: net.Socket);
    sendMessage(msg: AFCMessage): Promise<AFCResponse>;
}
export declare class AFCProtocolReader extends ProtocolReader {
    private header;
    constructor(callback: ProtocolReaderCallback);
    parseHeader(data: Buffer): number;
    parseBody(data: Buffer): AFCResponse | AFCStatusResponse;
}
export declare class AFCProtocolWriter implements ProtocolWriter {
    write(socket: net.Socket, msg: AFCMessage & {
        requestId: number;
    }): void;
}
